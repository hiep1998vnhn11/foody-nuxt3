import{q as N,s as c,v as h,e as k,r as f,x as q,f as z,y as B,b as l,h as u,F as _,i as b,u as S,o as d,j as w,t as x}from"./entry.ad7b1a50.js";import{u as I,a as j,_ as A}from"./useObserver.f07b43d3.js";const O=()=>N().$img,$={src:{type:String,required:!0},format:{type:String,default:void 0},quality:{type:[Number,String],default:void 0},background:{type:String,default:void 0},fit:{type:String,default:void 0},modifiers:{type:Object,default:void 0},preset:{type:String,default:void 0},provider:{type:String,default:void 0},sizes:{type:[Object,String],default:void 0},preload:{type:Boolean,default:void 0},width:{type:[String,Number],default:void 0},height:{type:[String,Number],default:void 0},alt:{type:String,default:void 0},referrerpolicy:{type:String,default:void 0},usemap:{type:String,default:void 0},longdesc:{type:String,default:void 0},ismap:{type:Boolean,default:void 0},loading:{type:String,default:void 0},crossorigin:{type:[Boolean,String],default:void 0,validator:e=>["anonymous","use-credentials","",!0,!1].includes(e)},decoding:{type:String,default:void 0,validator:e=>["async","auto","sync"].includes(e)}},C=e=>{const o=c(()=>({provider:e.provider,preset:e.preset})),n=c(()=>({width:h(e.width),height:h(e.height),alt:e.alt,referrerpolicy:e.referrerpolicy,usemap:e.usemap,longdesc:e.longdesc,ismap:e.ismap,crossorigin:e.crossorigin===!0?"anonymous":e.crossorigin||void 0,loading:e.loading,decoding:e.decoding})),a=c(()=>({...e.modifiers,width:h(e.width),height:h(e.height),format:e.format,quality:e.quality,background:e.background,fit:e.fit}));return{options:o,attrs:n,modifiers:a}},D={...$,placeholder:{type:[Boolean,String,Number,Array],default:void 0}},E=k({name:"NuxtImg",props:D,setup:(e,o)=>{const n=O(),a=C(e),y=f(!1),s=c(()=>n.getSizes(e.src,{...a.options.value,sizes:e.sizes,modifiers:{...a.modifiers.value,width:h(e.width),height:h(e.height)}})),p=c(()=>{const t=a.attrs.value;return e.sizes&&(t.sizes=s.value.sizes,t.srcset=s.value.srcset),t}),v=c(()=>{let t=e.placeholder;if(t===""&&(t=!0),!t||y.value)return!1;if(typeof t=="string")return t;const i=Array.isArray(t)?t:typeof t=="number"?[t,t]:[10,10];return n(e.src,{...a.modifiers.value,width:i[0],height:i[1],quality:i[2]||50},a.options.value)}),g=c(()=>e.sizes?s.value.src:n(e.src,a.modifiers.value,a.options.value)),r=c(()=>v.value?v.value:g.value);if(e.preload){const t=Object.values(s.value).every(i=>i);q({link:[{rel:"preload",as:"image",...t?{href:s.value.src,imagesizes:s.value.sizes,imagesrcset:s.value.srcset}:{href:r.value}}]})}const m=f(null);return z(()=>{if(v.value){const t=new Image;t.src=g.value,t.onload=()=>{m.value.src=g.value,y.value=!0}}}),()=>B("img",{ref:m,key:r.value,src:r.value,...p.value,...o.attrs})}}),M={class:"container"},R=u("h1",{class:"text-bold text-3xl mb-2"}," Nuxtapp Demo some card items with lazyload and intersection observer ",-1),L=u("h2",null,"This page was using CDN image",-1),P={class:"grid md:grid-cols-5 gap-2 grid-cols-2 sm:grid-cols-3"},T={class:"px-3 py-2"},V={class:"font-bold text-xl mb-2"},F={class:"text-gray-700 text-base"},H={class:"px-3 pt-2 pb-1"},G={key:0,class:"grid grid-cols-5 gap-2"},Q=k({__name:"index",setup(e){const o={image:"https://images.foody.vn/res/g75/747170/prof/s750x400/foody-upload-api-foody-mobile-1-jpg-180606103333.jpg",name:"The Coldest Sunset",description:`Lorem ipsum dolor sit amet, consectetur adipisicing elit.
            Voluptatibus quia, nulla! Maiores et perferendis eaque,
            exercitationem praesentium nihil.`,tags:["photography","travel","lifestyle"]},n=async v=>{p.value=!0,await new Promise(r=>setTimeout(r,500)),p.value=!1;const g=Date.now();return Array.from({length:v},(r,m)=>({...o,name:`${o.name} ${g+m+1}`,image:o.image+"?t="+(g+m),tags:o.tags.slice(0,Math.floor(Math.random()*3)+1)}))},a=f([]),y=f(null);I(a),j(y,async()=>{s.value=[...s.value,...await n(20)]});const s=f([]);f(0);const p=f(!0);return z(async()=>{s.value=await n(40)}),(v,g)=>{const r=E,m=A;return d(),l("div",M,[R,L,u("div",null,[u("div",P,[(d(!0),l(_,null,b(S(s),t=>(d(),l("div",{key:t.name,class:"card max-w-sm rounded overflow-hidden shadow-lg",ref_for:!0,ref:i=>S(a).push(i)},[w(r,{class:"w-full",src:t.image,alt:"Sunset in the mountains",width:"750",height:"400",placeholder:"",quality:"80"},null,8,["src"]),u("div",T,[u("div",V,x(t.name),1),u("p",F,x(t.description),1)]),u("div",H,[(d(!0),l(_,null,b(t.tags,i=>(d(),l("span",{key:i,class:"inline-block bg-gray-200 rounded-full px-3 py-1 text-sm font-semibold text-gray-700 mr-2 mb-2"}," #"+x(i),1))),128))])]))),128))]),S(p)?(d(),l("div",G,[(d(),l(_,null,b(10,t=>w(m,{key:t})),64))])):(d(),l("div",{key:1,ref_key:"intersectionElementRef",ref:y},null,512))])])}}});export{Q as default};
